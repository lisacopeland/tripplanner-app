<div class="wrapper">
  <div class="list-header">
    <h1>Trip List</h1>
  </div>
  <div class="list-wrapper">
    <ng-container *ngIf="trips$ | async as trips; else noTrips">
      <ng-container *ngFor="let trip of trips">
        <mat-card class="trip-card">
          <mat-card-header class="card-header">
            <mat-card-title>
              {{trip.admin_title}}
            </mat-card-title>
            <button mat-button [matMenuTriggerFor]="menu" (menuOpened)="menuOpened(trip)">Menu</button>
          </mat-card-header>
          <img mat-card-image [src]=trip.background_pic_url />
          <mat-card-content>
            <p>
              {{ trip.admin_notes }}
            </p>
            <p>Starting on {{trip.start_date | date: "medium"}}</p>
            <p>Ending on {{trip.end_date | date: "medium"}}</p>
          </mat-card-content>
        </mat-card>
      </ng-container>
    </ng-container>
    <ng-template #noTrips>
      <p>You have no trips, use Create Trips to get started</p>
    </ng-template>
    <mat-card class="create-card">
      <h2>Create new</h2>
      <mat-form-field>
        <mat-label>Name</mat-label>
        <input matInput placeholder="Trip name" (keydown.enter)="createTrip()" [(ngModel)]="newTripTitle" />
      </mat-form-field>
      <button mat-button color="primary" type="button" [disabled]="newTripTitle === ''"
        (click)="createTrip()">Continue</button>
    </mat-card>
  </div>
</div>

<mat-menu #menu="matMenu">
  <button mat-menu-item (click)="onGotoDetail()">Go to detail</button>
  <button mat-menu-item (click)="onEdit()">Edit</button>
  <button mat-menu-item (click)="onArchive()">Archive</button>
</mat-menu>